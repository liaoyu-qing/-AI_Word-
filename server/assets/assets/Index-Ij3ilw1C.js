/* empty css                    */import{a as S,d as F,r,o as W,c as z,b as t,w as n,E as G,e as B,f as L,g as H,h as s,i as J,j as Q,k as m,l as X,m as Z,n as $,u as b,p as ee,q as te,s as y,t as le,v as ne,x as E,y as oe,z as ae,A as x}from"./index-C_JzXVDZ.js";const se=localStorage.getItem("Url"),c=S.create({baseURL:se,timeout:5e3});c.interceptors.request.use(u=>u,u=>Promise.reject(u));c.interceptors.response.use(u=>u.data,u=>Promise.reject(u));const ue={class:"container"},ie={class:"page2"},de={class:"inputClass"},re={class:"inputClass"},pe={class:"inputClass"},me={class:"confire_btn"},fe=F({__name:"Index",setup(u){const p=r("1"),f=r(!1),o=r({tokenDate:"",tokenNum:"",num:""});r(""),r({apiArr:null});let A=r({apiArr:null}),V=r({apiArr:null});W(()=>{C()});const C=()=>{c({url:"/api/v1/manager/query_keys",params:{manager_uid:"liaoyuAi"}}).then(l=>{console.log(l);let e=[],_=[];for(let a=0;a<l.length;a++)l[a].datediff<0&&(l[a].datediff=0),l[a].remainApi=l[a].tokens,l[a].datediff>0?e.push(l[a]):_.push(l[a]),a==l.length-1&&(console.log(e),V.value.apiArr=_,A.value.apiArr=e)}).catch(l=>{console.log(l)})},T=()=>{c({url:"/api/v1/manager/add_keys",params:{tokens:o.value.tokenNum,days:o.value.tokenDate,num:o.value.num,manager_uid:"liaoyuAi"}}).then(l=>{M(),C()}).catch(l=>{console.log(l),x.alert("生成失败，请稍后重试","错误",{confirmButtonText:"确认",callback:e=>{}})})},D=()=>{o.value.tokenDate!==""&&o.value.tokenNum!==""&&o.value.num!==""?T():P()},I=(l,e)=>{console.log(l,e)},N=(l,e)=>{console.log(l,e)},K=l=>{p.value=l+"",console.log(p.value)},M=()=>{x.alert("API_KEY生成成功","提示",{confirmButtonText:"确认",callback:l=>{p.value="1"}})},P=()=>{x.alert("请输入完整内容","提示",{confirmButtonText:"确认"})};return(l,e)=>{const _=Q,a=J,v=$,g=Z,U=B("Promotion"),Y=B("WarnTriangleFilled"),h=X,j=H,i=ne,w=le,k=oe,q=ae,O=te,R=G;return L(),z("div",ue,[t(R,null,{default:n(()=>[t(j,{width:"200px"},{default:n(()=>[s("div",null,[t(a,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=d=>f.value=d),style:{"margin-bottom":"20px"}},{default:n(()=>[t(_,{value:!1},{default:n(()=>e[4]||(e[4]=[m("展开")])),_:1,__:[4]}),t(_,{value:!0},{default:n(()=>e[5]||(e[5]=[m("关闭")])),_:1,__:[5]})]),_:1},8,["modelValue"]),t(h,{"default-active":"1",class:"el-menu-vertical-demo",collapse:f.value,onOpen:I,onClose:N,onSelect:K},{default:n(()=>[t(g,{index:"1"},{title:n(()=>e[6]||(e[6]=[m("查看KEY")])),default:n(()=>[t(v,null,{default:n(()=>[t(b(ee))]),_:1})]),_:1}),t(g,{index:"2"},{title:n(()=>e[7]||(e[7]=[m("生成KEY")])),default:n(()=>[t(v,null,{default:n(()=>[t(U)]),_:1})]),_:1}),t(g,{index:"3"},{title:n(()=>e[8]||(e[8]=[m("过期KEY")])),default:n(()=>[t(v,null,{default:n(()=>[t(Y)]),_:1})]),_:1})]),_:1},8,["collapse"])])]),_:1}),t(O,null,{default:n(()=>[y(t(w,{data:b(A).apiArr,style:{width:"100%"}},{default:n(()=>[t(i,{prop:"key",label:"API_KEY",align:"center"}),t(i,{prop:"used_tokens",label:"已用tokens",align:"center"}),t(i,{prop:"remainApi",label:"剩余tokens",align:"center"}),t(i,{prop:"datediff",label:"有效期(天)",align:"center"})]),_:1},8,["data"]),[[E,p.value=="1"]]),y(s("div",ie,[s("div",de,[e[9]||(e[9]=s("div",{class:"title"},"token时长（天）:",-1)),t(k,{min:"0",modelValue:o.value.tokenDate,"onUpdate:modelValue":e[1]||(e[1]=d=>o.value.tokenDate=d),type:"number",style:{width:"240px"},placeholder:""},null,8,["modelValue"])]),s("div",re,[e[10]||(e[10]=s("div",{class:"title"},"token数量:",-1)),t(k,{min:"0",modelValue:o.value.tokenNum,"onUpdate:modelValue":e[2]||(e[2]=d=>o.value.tokenNum=d),type:"number",style:{width:"240px"},placeholder:""},null,8,["modelValue"])]),s("div",pe,[e[11]||(e[11]=s("div",{class:"title"},"生成数量:",-1)),t(k,{min:"0",modelValue:o.value.num,"onUpdate:modelValue":e[3]||(e[3]=d=>o.value.num=d),type:"number",style:{width:"240px"},placeholder:""},null,8,["modelValue"])]),s("div",me,[t(q,{type:"primary",onClick:D},{default:n(()=>e[12]||(e[12]=[m("确认")])),_:1,__:[12]})])],512),[[E,p.value=="2"]]),y(t(w,{data:b(V).apiArr,style:{width:"100%"}},{default:n(()=>[t(i,{prop:"key",label:"API_KEY",align:"center"}),t(i,{prop:"used_tokens",label:"已用tokens",align:"center"}),t(i,{prop:"remainApi",label:"剩余tokens",align:"center"}),t(i,{prop:"datediff",label:"有效期(天)",align:"center"})]),_:1},8,["data"]),[[E,p.value=="3"]])]),_:1})]),_:1})])}}});export{fe as default};
